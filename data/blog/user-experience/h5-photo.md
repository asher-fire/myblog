---
title: '纯H5可以实现拍照和抓拍吗？'
date: '2025-10-05'
tags: ['UE']
draft: true
summary: '讨论纯H5是否可以实现拍照和抓拍'
---

## 一，特殊的需求

有个项目是移动端考试项目，用于考生在移动端考试，该项目是纯h5页面，一般在浏览器或微信扫码访问。

但是最近有个需求是在要求移动端h5页面，实现考前拍照、考前人脸识别和考试过程中抓拍。

## 二，不推荐H5实现

首先呢，我是不认可在h5页面，纯粹让前端来"硬实现"的。

如果说必须这样实现，那使用一些原生api也是可以实现的，甚至提测以后，测试也可以通过的。

但是这个功能点实现的真正门槛不在于，开发提测和验收。而是在于大批量用户真正使用的时候集中爆发的兼容性问题：大家可以想象一个时间点，几百人 不同操作系统、不同移动端浏览器、不同操作方式 由于原生api 可能出现的各种兼容性问题，到时候如果无法及时解决，大批量投诉都是比较轻的结果。

## 三，常规实现

之前的公司负责过 2天时间内10万人同时参考的国家级考试。 我们当时也有完全一样的功能 （考前拍照、考前人脸识别和考试过程中抓拍）。实现方式就是让`android`、`ios` 来实现，然后前端通过`jsbridge` 来调用即可。 当然我们会让考生在考试之前半个月或一周来 **提前做人脸识别**。

专门的`android`、`ios`开发，肯定比前端更了解每个系统版本的各种坑，他们在上线之前还会通过云市场或公司的多个测试机来做版本测试 （公司对于常见机型，一般都有实体测试机，比如小米、vivo、oppo、华为、ipad、iphone6、iphone12、iphone16等等）。再加上h5页面是通过webview来加载，不会有移动端各种浏览器的兼容性问题。再加上提前让考生 **提前做人脸识别** 其实就是在做兼容性的分批测试了，一般情况下，如果摄像头调用没问题，后面的拍照和抓拍也就没有什么问题。最后我们还有销售或售前人员，在现场辅助考生 **做人脸识别** ，这些人员一般对一些常见问题都有相关处理经验。

所以我想要说的是，对比我们之前的成套方案，单纯的让前端在h5页面实现考前拍照、考前人脸识别和考试过程中抓拍。然后不经过多系统多浏览器测试，甚至不提前分批测试，使用的时候没有足够经验的销售或售前人员辅助。最后集中爆发兼容性问题，然后寄希望于前端在短时间内快速解决，简直是灾难。

不同系统 + 不同浏览器 + 不同的操作方式，会导致兼容性问题指数级出现。我们假设一个用户默认就喜欢用无痕模式浏览，这种情况下，该用户甚至都不会意识到这个问题，他只会一直让前端来解决无法拍照的问题。

## 四，折中方案

但是如果说没有专门的`android`、`ios`开发，又必须实现这个功能怎么办？

1. 那可以推荐使用`微信小程序`来实现，`微信小程序`的相关api也可以实现这些功能。

2. 但是如果客户处于项目成本考虑，不想再多弄一个`微信小程序`怎么办 ？那推荐可以借助`微信jssdk`来实现，基本流程是：注册一个`公众号或服务号`，然后`配置安全域名`，然后前端引用`jweixin-版本.js`( [微信网页开发](https://developers.weixin.qq.com/doc/subscription/guide/h5/) )。

    理由是：
    - ① 这种情况下，页面只能在微信端打开, 天然解决了移动端不同浏览器的兼容性问题, 在非微信端打开页面的url会提示 '请在微信客户端打开链接' ：
    ![微信网页无法在非微信端图](/static/images/user-experience/h5-photo/01.jpg)

    - ② 其次微信做为一个大公司，肯定会对微信客户端在不同操作系统不同版本的兼容性问题做深度测试。
    - ③ 公众号不认证也有拍照或上传照片等基础功能, 具体可以看 [微信网页开发-附录 | 权限对照表](https://developers.weixin.qq.com/doc/subscription/guide/h5/jssdk.html#%E9%99%84%E5%BD%95-%E6%9D%83%E9%99%90%E5%AF%B9%E7%85%A7%E8%A1%A8)

    ![微信网页权限图](/static/images/user-experience/h5-photo/02.png)

3. 还有很重要的一点要说明，微信网页端是无法持续抓拍的，这种情况下可以采用类似交互：     

    过几分钟要求用户切换前置摄像头并拍照上传（`wx.chooseImage`），不拍照上传就无法继续考试。

